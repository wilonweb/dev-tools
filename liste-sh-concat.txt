===== ./bash-tools/bashrc.sh =====
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“¦ Fonctions Bash/Zsh pour outils perso (tools + github)
# ğŸ“ Ã€ sourcer dans ~/.zshrc ou ~/.bashrc
# ğŸ” Utiliser `source ~/.zshrc` ou `reload` aprÃ¨s modif
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# ğŸ”§ Menu TOOLS
function tools() {
  echo "ğŸ§° Menu TOOLS"
  echo "1) Afficher l'arborescence (structure.txt)"
  echo "2) Lister les fichiers .sh (liste-sh.txt)"
  echo "3) ConcatÃ©ner les .js avec titres (liste-js.txt)"
  echo "4) ConcatÃ©ner les .sh avec titres (liste-sh-concat.txt)"
  echo "5) ConcatÃ©ner les .md avec titres (liste-md.txt)"
  echo "6) Menu GitHub"
  echo "7) Quitter"
  echo -n "Ton choix : "
  read choice

  case $choice in
    1)
      echo "ğŸ“ GÃ©nÃ©ration de structure.txt..."
      find . | awk -F/ '{ indent = ""; for(i=2;i<NF;i++) indent=indent"â”‚   "; if(NF>1) print indent "â”œâ”€â”€ " $NF; else print $0; }' > structure.txt
      echo "âœ… TerminÃ©"
      ;;
    2)
      echo "ğŸ” Liste des fichiers .sh..."
      find . -type f -name "*.sh" > liste-sh.txt
      echo "âœ… TerminÃ©"
      ;;
    3)
      echo "ğŸ“œ ConcatÃ©nation des fichiers .js..."
      > liste-js.txt
      find . -type f -name "*.js" | while read -r file; do
        echo "===== $file =====" >> liste-js.txt
        cat "$file" >> liste-js.txt
        echo -e "\n" >> liste-js.txt
      done
      echo "âœ… TerminÃ©"
      ;;
    4)
      echo "ğŸ“œ ConcatÃ©nation des fichiers .sh..."
      > liste-sh-concat.txt
      find . -type f -name "*.sh" | while read -r file; do
        echo "===== $file =====" >> liste-sh-concat.txt
        cat "$file" >> liste-sh-concat.txt
        echo -e "\n" >> liste-sh-concat.txt
      done
      echo "âœ… TerminÃ©"
      ;;
    5)
      echo "ğŸ“˜ ConcatÃ©nation des fichiers .md..."
      > liste-md.txt
      find . -type f -name "*.md" | while read -r file; do
        echo "===== $file =====" >> liste-md.txt
        cat "$file" >> liste-md.txt
        echo -e "\n" >> liste-md.txt
      done
      echo "âœ… TerminÃ©"
      ;;
    6)
      github
      ;;
    7)
      echo "ğŸ‘‹ Bye !"
      ;;
    *)
      echo "âŒ Choix invalide"
      ;;
  esac
}

# ğŸ§° Menu GitHub
function github() {
  echo "ğŸ™ Menu GitHub CLI"
  echo "1) CrÃ©er un repo"
  echo "2) Supprimer un repo"
  echo "3) Lister mes repos"
  echo "4) Passer un repo en public"
  echo "5) Tout passer en privÃ©"
  echo "6) Changer visibilitÃ© dâ€™un repo"
  echo "7) Quitter"
  echo -n "ğŸ‘‰ Ton choix : "
  read choice

  case $choice in
    1) bash ~/Documents/VisualStudioCode/dev-tools/github-tools/create-repo.sh ;;
    2) bash ~/Documents/VisualStudioCode/dev-tools/github-tools/delete-repo.sh ;;
    3) bash ~/Documents/VisualStudioCode/dev-tools/github-tools/list-repo.sh ;;
    4) bash ~/Documents/VisualStudioCode/dev-tools/github-tools/make-public.sh ;;
    5) bash ~/Documents/VisualStudioCode/dev-tools/github-tools/private-all.sh ;;
    6) bash ~/Documents/VisualStudioCode/dev-tools/github-tools/togle-visibility.sh ;;
    7) echo "ğŸ‘‹ Ã€ bientÃ´t" ;;
    *) echo "âŒ Choix invalide" ;;
  esac
}


===== ./bash-tools/get-structure.sh =====
# Affiche la structure parent enfant d'un dossier. 
find . | awk -F/ '{ 
  indent = "";
  for(i=2; i<NF; i++) indent = indent "â”‚   ";
  if (NF>1) print indent "â”œâ”€â”€ " $NF;
  else print $0;
}' > structure.txt

# Affiche les fichier .sh du dossier et sous dossier
find . -type f -name "*.sh" > liste-sh.txt


===== ./bash-tools/github.sh =====
#!/bin/bash

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“ Menu GitHub CLI : github()
# ğŸ“Œ Permet de lancer des actions GitHub depuis un menu
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function github() {
  echo "ğŸ§° Menu GitHub"
  echo "1) CrÃ©er un repo"
  echo "2) Supprimer un repo"
  echo "3) Lister mes repos"
  echo "4) Passer un repo en public"
  echo "5) Tout passer en privÃ©"
  echo "6) Changer visibilitÃ© dâ€™un repo"
  echo "7) Quitter"ls
  read -p "Ton choix : " choice

  case $choice in
    1) bash github-tools/create-repo.sh ;;
    2) bash github-tools/delete-repo.sh ;;
    3) bash github-tools/list-repo.sh ;;
    4) bash github-tools/make-public.sh ;;
    5) bash github-tools/private-all.sh ;;
    6) bash github-tools/togle-visibility.sh ;;
    7) echo "ğŸ‘‹ Ã€ bientÃ´t" ;;
    *) echo "âŒ Choix invalide" ;;
  esac
}


===== ./github-tools/create-repo.sh =====
#!/bin/bash

echo "ğŸš€ CrÃ©ation dâ€™un nouveau dÃ©pÃ´t GitHub"

# Demande le nom du repo (nom du dossier courant par dÃ©faut)
default_name=$(basename "$PWD")
read -p "ğŸ“ Nom du dÃ©pÃ´t [$default_name] : " repo_name
repo_name=${repo_name:-$default_name}

# Demande une description
read -p "ğŸ“„ Description du dÃ©pÃ´t : " description

# Demande la visibilitÃ©
echo "ğŸ” VisibilitÃ© :"
select visibility in "public" "private"; do
  if [[ "$visibility" == "public" || "$visibility" == "private" ]]; then
    break
  else
    echo "âŒ Choix invalide. RÃ©essaie."
  fi
done

# CrÃ©e le repo GitHub
echo "ğŸ”§ CrÃ©ation du dÃ©pÃ´t distant sur GitHub..."
gh repo create "$repo_name" --"$visibility" --description "$description" --source=. --remote=origin --push

if [ $? -eq 0 ]; then
  echo "âœ… DÃ©pÃ´t '$repo_name' crÃ©Ã© avec succÃ¨s et liÃ© Ã  ton dossier local."
else
  echo "âŒ Ã‰chec de la crÃ©ation du dÃ©pÃ´t."
fi


===== ./github-tools/delete-repo.sh =====
#!/bin/bash

echo "ğŸ—‘ï¸ Suppression d'un dÃ©pÃ´t GitHub"

read -p "ğŸ”§ Nom du repo (ex: mon-repo ou wilonweb/mon-repo) : " INPUT

if [[ "$INPUT" == *"/"* ]]; then
  REPO="$INPUT"
else
  REPO="wilonweb/$INPUT"
fi

echo "âš ï¸ Tu t'apprÃªtes Ã  supprimer le dÃ©pÃ´t : $REPO"
echo "ğŸš¨ Cette action est irrÃ©versible !"

read -p "âœ‹ Confirmer la suppression ? (o/n) : " CONFIRM

if [[ "$CONFIRM" != "o" ]]; then
  echo "âŒ AnnulÃ©."
  exit 1
fi

gh repo delete "$REPO" --confirm


===== ./github-tools/list-repo.sh =====
#!/bin/bash

# Nom de ton utilisateur GitHub
USERNAME="wilonweb"

echo "ğŸ” Quel type de dÃ©pÃ´ts veux-tu afficher ?"
echo "1) Tous les dÃ©pÃ´ts"
echo "2) DÃ©pÃ´ts publics"
echo "3) DÃ©pÃ´ts privÃ©s"
echo "4) DÃ©pÃ´ts template (modÃ¨les)"  # âœ… Ajout ici
read -p "#? " choice

case $choice in
  1)
    echo "ğŸ“¦ Tous les dÃ©pÃ´ts :"
    gh repo list "$USERNAME" --limit 100
    ;;
  2)
    echo "ğŸŒ DÃ©pÃ´ts publics :"
    gh repo list "$USERNAME" --visibility public --limit 100
    ;;
  3)
    echo "ğŸ” DÃ©pÃ´ts privÃ©s :"
    gh repo list "$USERNAME" --visibility private --limit 100
    ;;
  4)
    echo "ğŸ“ DÃ©pÃ´ts template (modÃ¨les) :"
    gh repo list "$USERNAME" --source --json name,isTemplate,visibility \
      -q '.[] | select(.isTemplate==true) | "\(.visibility | ascii_upcase) - \(.name)"'
    ;;
  *)
    echo "âŒ Choix invalide. Veuillez entrer un chiffre entre 1 et 4."
    ;;
esac


===== ./github-tools/liste-template.sh =====


gh repo list wilonweb --source --json name,isTemplate,visibility -q '.[] | select(.isTemplate==true) | "\(.visibility | ascii_upcase) - \(.name)"'

===== ./github-tools/make-public.sh =====
#!/bin/bash

echo "ğŸ”“ Passage dâ€™un dÃ©pÃ´t GitHub en public"
read -p "Nom du dÃ©pÃ´t (ex: mon-repo) : " repo

# Ajoute ton nom d'utilisateur GitHub ici si absent
username="wilonweb"

echo "ğŸš€ Passage en public de https://github.com/$username/$repo..."

gh repo edit "$username/$repo" \
  --visibility public \
  --accept-visibility-change-consequences && \
  echo "âœ… Le dÃ©pÃ´t est maintenant public." || \
  echo "âŒ Une erreur s'est produite."


===== ./github-tools/private-all.sh =====
#!/bin/bash

# Ce script rend tous tes repos en privÃ© (âš ï¸ irrÃ©versible sauf manuellement)

echo "ğŸ” DÃ©but : rendre tous les dÃ©pÃ´ts privÃ©s..."
gh repo list $USER --limit 100 --json name,visibility --jq '.[] | select(.visibility == "public") | .name' |
while read repo; do
  echo "â¡ï¸  Repo : $repo â†’ privÃ©"
  gh repo edit "$USER/$repo" --visibility private
done
echo "âœ… Tous les dÃ©pÃ´ts publics sont maintenant privÃ©s."


===== ./github-tools/togle-visibility.sh =====
#!/bin/bash

echo "ğŸ” Changement de visibilitÃ© d'un dÃ©pÃ´t GitHub"

read -p "ğŸ”§ Nom du repo (ex: wilonweb/mon-repo) : " REPO
read -p "ğŸ¯ Nouvelle visibilitÃ© (public/private) : " VISIBILITY

if [[ "$VISIBILITY" != "public" && "$VISIBILITY" != "private" ]]; then
  echo "âŒ VisibilitÃ© invalide. Choisis 'public' ou 'private'."
  exit 1
fi

echo "âš ï¸ Tu vas modifier la visibilitÃ© du dÃ©pÃ´t : $REPO â†’ $VISIBILITY"
read -p "âœ… Confirmer ? (o/n) : " CONFIRM

if [[ "$CONFIRM" != "o" ]]; then
  echo "âŒ OpÃ©ration annulÃ©e."
  exit 1
fi

gh repo edit "$REPO" --visibility "$VISIBILITY" --accept-visibility-change-consequences

if [ $? -eq 0 ]; then
  echo "âœ… VisibilitÃ© mise Ã  jour avec succÃ¨s pour $REPO"
else
  echo "âŒ Ã‰chec de la mise Ã  jour. VÃ©rifie le nom du repo et ton accÃ¨s."
fi


